2025-04-17T07:59:25+02:00 :: StoreAndupdateTicket Script Start 

2025-04-17T07:59:25+02:00 :: method inside the insertNotification 

2025-04-17T07:59:25+02:00 :: requested data : assign_to => 21 

2025-04-17T07:59:25+02:00 :: respose => {"status":200,"message":"Notification already added successfully!"}

 ============ End Of Script ================== 

2025-04-17T07:59:26+02:00 :: StoreAndupdateTicket Script Start 

2025-04-17T07:59:26+02:00 :: method inside the insertNotification 

2025-04-17T07:59:26+02:00 :: requested data : assign_to => 18 

2025-04-17T07:59:26+02:00 :: respose => {"status":200,"message":"Notification already added successfully!"}

 ============ End Of Script ================== 

2025-04-17T07:59:28+02:00 :: StoreAndupdateTicket Script Start 

2025-04-17T07:59:28+02:00 :: method inside the updateStatus 

2025-04-17T07:59:28+02:00 :: requested data : ticket_id => 18 and status => 3 

2025-04-17T07:59:28+02:00 :: updateTicketRecord_query => UPDATE ticket_record SET status = '3'  WHERE id = '18' 

2025-04-17T07:59:28+02:00 :: method inside the insertTicketHistory 

2025-04-17T07:59:28+02:00 :: requested data : ticket_id => 18 

2025-04-17T07:59:28+02:00 :: getUpdatedData_query => SELECT assign_by , assign_to , status , priority , category , department ,deadline_date,timer_stop FROM `ticket_record` WHERE id = '18' 

2025-04-17T07:59:28+02:00 :: Insert into ticket_history successful 

2025-04-17T07:59:28+02:00 :: respose => {"status":200,"message":"Status Updated successfully!"}

 ============ End Of Script ================== 

2025-04-17T07:59:28+02:00 :: StoreAndupdateTicket Script Start 

2025-04-17T07:59:28+02:00 :: method inside the insertNotification 

2025-04-17T07:59:28+02:00 :: requested data : assign_to => 18 

2025-04-17T07:59:28+02:00 :: respose => {"status":200,"message":"Notification already added successfully!"}

 ============ End Of Script ================== 

2025-04-17T07:59:40+02:00 :: StoreAndupdateTicket Script Start 

2025-04-17T07:59:40+02:00 :: method inside the updateStatus 

2025-04-17T07:59:40+02:00 :: requested data : ticket_id => 18 and status => 4 

2025-04-17T07:59:40+02:00 :: updateTicketRecord_query => UPDATE ticket_record SET status = '4'  , timer_stop = '2025-04-17 07:59:40' WHERE id = '18' 

2025-04-17T07:59:40+02:00 :: method inside the insertTicketHistory 

2025-04-17T07:59:40+02:00 :: requested data : ticket_id => 18 

2025-04-17T07:59:40+02:00 :: getUpdatedData_query => SELECT assign_by , assign_to , status , priority , category , department ,deadline_date,timer_stop FROM `ticket_record` WHERE id = '18' 

2025-04-17T07:59:40+02:00 :: Insert into ticket_history successful 

2025-04-17T07:59:40+02:00 :: method inside the getTicketAllInformation 

2025-04-17T07:59:40+02:00 :: requested data : ticket_id => 18 

2025-04-17T07:59:40+02:00 :: fetch ticket info Query => SELECT ticket_record.id , ticket_record.unique_id , ticket_record.task_name , ticket_record.task_description , CASE WHEN ticket_record.priority = '1' THEN 'Low' WHEN ticket_record.priority = '2' THEN 'Medium' WHEN ticket_record.priority = '3' THEN 'High' END as `ticketPriority` , DATE_FORMAT(ticket_record.updated_at,'%d-%b-%Y %h:%i:%s') as `assignDate` , ticket_record.create_person_name as `createdPersonName` , assign_to_user.Name as `assignToUser` , assign_by_user.Name as `assignByUser` , ticket_record.create_person_email as `createPersonEmail` , assign_to_user.Email as `assignToUserEmail` FROM ticket_record LEFT JOIN users as `assign_to_user` ON ticket_record.assign_to = assign_to_user.ID LEFT JOIN users AS `assign_by_user` ON ticket_record.assign_by = assign_by_user.ID  WHERE ticket_record.id = '18' 

2025-04-17T07:59:40+02:00 :: method inside the createEmailData 

2025-04-17T07:59:40+02:00 :: requested ticket_info_data => {"ticket_id":"18","ticketQniqueId":"GLOCAL-4","ticketSubject":"Exam Form Not Show","ticketPriority":"High","assignDate":"17-Apr-2025 11:29:40","createdPersonName":"GUNISHA SHARMA ","assignToUser":"Deepak Singh Rawat","assignByUser":"Mahinder Nautiyal","createPersonEmail":"sharmagunisha2@gmail.com","assignToUserEmail":"deepak@edtechinnovate.com"} email_function => {"messageToCreateUserForReviewTicket":{"email":"sharmagunisha2@gmail.com"}} 

2025-04-17T07:59:40+02:00 :: Resposne received from => messageToCreateUserForReviewTicket 

2025-04-17T07:59:40+02:00 :: TO => sharmagunisha2@gmail.com 

 cc =>  

 subject => Action Required: Please Review Your Ticket - GLOCAL-4 

 body => 
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        .request_button {
            margin: 4px 2px;
            display: block;
            height: 25px;
            padding: 10px 20px;
            text-align: center;
            border-radius: 16px;
            font-weight: bold;
            line-height: 25px;
        }
    </style>
</head>
<body>
    
<section>
    <p>Hi GUNISHA SHARMA ,</p>
    <div>Our support team has reviewed and worked on your ticket <strong>GLOCAL-4</strong></div>.
    <div>We believe the issue has been resolved. Please take a moment to review the ticket.</div>
    <div>If the issue is resolved, you can go ahead and close the ticket. If not, feel free to re-open the Ticket.</div>
    <p><b>Action Required : </b></p>
    <div style = "display:flex;gap:0.5rem;">
        <a href= "http://edtechstrucure.local/app/tickets/showCloseTicketResponse?token=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJ0aWNrZXRfaWQiOiIxOCIsIm1ldGhvZCI6InVwZGF0ZVRpY2tldFN0YXR1c1Jldmlld1RvQ2xvc2UiLCJpYXQiOjE3NDQ4Njk1ODAsImV4cCI6MTc0NTA0MjM4MH0.wzUlH8150vqY7bOYIEA5hb-q8IA9pHtvzCn_RKgeSYM" id="closeButton" class = "button request_button" style = "background: #40ca58eb;color: white;">Close</a>
        <a href= "http://edtechstrucure.local/api/ticket/ReopenTicketReviewMessage?token=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJ0aWNrZXRfaWQiOiIxOCIsIm1ldGhvZCI6Imluc2VydFJlb3BlblRpY2tldFF1ZXJ5IiwiaWF0IjoxNzQ0ODY5NTgwLCJleHAiOjE3NDUwNDIzODB9.XYfTp4Gg8ypJ-7N4t_EQre9UNF5iZ38TaDSoIPyhIx8" id="reopenButton" class = "button request_button" style = "background:rgba(234, 168, 36, 0.86);color: white;">Re-open</a>
    </div>
    <br><br>
    <small><i>  *This is a system-generated email. No reply is required.</i></small>
</section>

<!-- <script type="text/javascript">

var baseUrl = "http://edtechstrucure.local";

document.getElementById("closeButton").addEventListener("click" , async function(e){
    let url = baseUrl+"/app/tickets/storeAndupdateTicket.php";
    let param = {
        "method" : "updateTicketStatusReviewToClose" ,
        "ticket_id" : '' 
    };
    const response = await fetch(url , {
        method : "POST" , 
        body : JSON.stringify(params)
    });
    if(!response.ok) {
        console.error(`HTTP error! Status: ${response.status}`);
    }
    const data = response.json();
    if (data != null) {
        alert(data.message);
    }
})

</script> -->
</body>
</html> 

2025-04-17T07:59:40+02:00 :: mail_queue Data => [{"to":"sharmagunisha2@gmail.com","cc":null,"subject":"Action Required: Please Review Your Ticket - GLOCAL-4","body":"\r\n<!DOCTYPE html>\r\n<html lang=\"en\">\r\n<head>\r\n    <meta charset=\"UTF-8\">\r\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n    <title>Document<\/title>\r\n    <style>\r\n        .request_button {\r\n            margin: 4px 2px;\r\n            display: block;\r\n            height: 25px;\r\n            padding: 10px 20px;\r\n            text-align: center;\r\n            border-radius: 16px;\r\n            font-weight: bold;\r\n            line-height: 25px;\r\n        }\r\n    <\/style>\r\n<\/head>\r\n<body>\r\n    \r\n<section>\r\n    <p>Hi GUNISHA SHARMA ,<\/p>\r\n    <div>Our support team has reviewed and worked on your ticket <strong>GLOCAL-4<\/strong><\/div>.\r\n    <div>We believe the issue has been resolved. Please take a moment to review the ticket.<\/div>\r\n    <div>If the issue is resolved, you can go ahead and close the ticket. If not, feel free to re-open the Ticket.<\/div>\r\n    <p><b>Action Required : <\/b><\/p>\r\n    <div style = \"display:flex;gap:0.5rem;\">\r\n        <a href= \"http:\/\/edtechstrucure.local\/app\/tickets\/showCloseTicketResponse?token=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJ0aWNrZXRfaWQiOiIxOCIsIm1ldGhvZCI6InVwZGF0ZVRpY2tldFN0YXR1c1Jldmlld1RvQ2xvc2UiLCJpYXQiOjE3NDQ4Njk1ODAsImV4cCI6MTc0NTA0MjM4MH0.wzUlH8150vqY7bOYIEA5hb-q8IA9pHtvzCn_RKgeSYM\" id=\"closeButton\" class = \"button request_button\" style = \"background: #40ca58eb;color: white;\">Close<\/a>\r\n        <a href= \"http:\/\/edtechstrucure.local\/api\/ticket\/ReopenTicketReviewMessage?token=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJ0aWNrZXRfaWQiOiIxOCIsIm1ldGhvZCI6Imluc2VydFJlb3BlblRpY2tldFF1ZXJ5IiwiaWF0IjoxNzQ0ODY5NTgwLCJleHAiOjE3NDUwNDIzODB9.XYfTp4Gg8ypJ-7N4t_EQre9UNF5iZ38TaDSoIPyhIx8\" id=\"reopenButton\" class = \"button request_button\" style = \"background:rgba(234, 168, 36, 0.86);color: white;\">Re-open<\/a>\r\n    <\/div>\r\n    <br><br>\r\n    <small><i>  *This is a system-generated email. No reply is required.<\/i><\/small>\r\n<\/section>\r\n\r\n<!-- <script type=\"text\/javascript\">\r\n\r\nvar baseUrl = \"http:\/\/edtechstrucure.local\";\r\n\r\ndocument.getElementById(\"closeButton\").addEventListener(\"click\" , async function(e){\r\n    let url = baseUrl+\"\/app\/tickets\/storeAndupdateTicket.php\";\r\n    let param = {\r\n        \"method\" : \"updateTicketStatusReviewToClose\" ,\r\n        \"ticket_id\" : '' \r\n    };\r\n    const response = await fetch(url , {\r\n        method : \"POST\" , \r\n        body : JSON.stringify(params)\r\n    });\r\n    if(!response.ok) {\r\n        console.error(`HTTP error! Status: ${response.status}`);\r\n    }\r\n    const data = response.json();\r\n    if (data != null) {\r\n        alert(data.message);\r\n    }\r\n})\r\n\r\n<\/script> -->\r\n<\/body>\r\n<\/html>"}]

2025-04-17T07:59:40+02:00 :: url => http://edtechstrucure.local/app/mailSystem/CreateMailQueue , request => {"data":[{"to":"sharmagunisha2@gmail.com","cc":null,"subject":"Action Required: Please Review Your Ticket - GLOCAL-4","body":"\r\n<!DOCTYPE html>\r\n<html lang=\"en\">\r\n<head>\r\n    <meta charset=\"UTF-8\">\r\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n    <title>Document<\/title>\r\n    <style>\r\n        .request_button {\r\n            margin: 4px 2px;\r\n            display: block;\r\n            height: 25px;\r\n            padding: 10px 20px;\r\n            text-align: center;\r\n            border-radius: 16px;\r\n            font-weight: bold;\r\n            line-height: 25px;\r\n        }\r\n    <\/style>\r\n<\/head>\r\n<body>\r\n    \r\n<section>\r\n    <p>Hi GUNISHA SHARMA ,<\/p>\r\n    <div>Our support team has reviewed and worked on your ticket <strong>GLOCAL-4<\/strong><\/div>.\r\n    <div>We believe the issue has been resolved. Please take a moment to review the ticket.<\/div>\r\n    <div>If the issue is resolved, you can go ahead and close the ticket. If not, feel free to re-open the Ticket.<\/div>\r\n    <p><b>Action Required : <\/b><\/p>\r\n    <div style = \"display:flex;gap:0.5rem;\">\r\n        <a href= \"http:\/\/edtechstrucure.local\/app\/tickets\/showCloseTicketResponse?token=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJ0aWNrZXRfaWQiOiIxOCIsIm1ldGhvZCI6InVwZGF0ZVRpY2tldFN0YXR1c1Jldmlld1RvQ2xvc2UiLCJpYXQiOjE3NDQ4Njk1ODAsImV4cCI6MTc0NTA0MjM4MH0.wzUlH8150vqY7bOYIEA5hb-q8IA9pHtvzCn_RKgeSYM\" id=\"closeButton\" class = \"button request_button\" style = \"background: #40ca58eb;color: white;\">Close<\/a>\r\n        <a href= \"http:\/\/edtechstrucure.local\/api\/ticket\/ReopenTicketReviewMessage?token=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJ0aWNrZXRfaWQiOiIxOCIsIm1ldGhvZCI6Imluc2VydFJlb3BlblRpY2tldFF1ZXJ5IiwiaWF0IjoxNzQ0ODY5NTgwLCJleHAiOjE3NDUwNDIzODB9.XYfTp4Gg8ypJ-7N4t_EQre9UNF5iZ38TaDSoIPyhIx8\" id=\"reopenButton\" class = \"button request_button\" style = \"background:rgba(234, 168, 36, 0.86);color: white;\">Re-open<\/a>\r\n    <\/div>\r\n    <br><br>\r\n    <small><i>  *This is a system-generated email. No reply is required.<\/i><\/small>\r\n<\/section>\r\n\r\n<!-- <script type=\"text\/javascript\">\r\n\r\nvar baseUrl = \"http:\/\/edtechstrucure.local\";\r\n\r\ndocument.getElementById(\"closeButton\").addEventListener(\"click\" , async function(e){\r\n    let url = baseUrl+\"\/app\/tickets\/storeAndupdateTicket.php\";\r\n    let param = {\r\n        \"method\" : \"updateTicketStatusReviewToClose\" ,\r\n        \"ticket_id\" : '' \r\n    };\r\n    const response = await fetch(url , {\r\n        method : \"POST\" , \r\n        body : JSON.stringify(params)\r\n    });\r\n    if(!response.ok) {\r\n        console.error(`HTTP error! Status: ${response.status}`);\r\n    }\r\n    const data = response.json();\r\n    if (data != null) {\r\n        alert(data.message);\r\n    }\r\n})\r\n\r\n<\/script> -->\r\n<\/body>\r\n<\/html>"}]} 

2025-04-17T07:59:40+02:00 :: response => {"status":200,"message":"Worker Start successfully!"} 

2025-04-17T07:59:40+02:00 :: respose => {"status":200,"message":"Status Updated successfully!"}

 ============ End Of Script ================== 

2025-04-17T07:59:40+02:00 :: StoreAndupdateTicket Script Start 

2025-04-17T07:59:40+02:00 :: method inside the insertNotification 

2025-04-17T07:59:40+02:00 :: requested data : assign_to => 18 

2025-04-17T07:59:40+02:00 :: respose => {"status":200,"message":"Notification already added successfully!"}

 ============ End Of Script ================== 

2025-04-17T08:10:14+02:00 :: StoreAndupdateTicket Script Start 

2025-04-17T08:10:14+02:00 :: method inside the insertReopenTicketQuery 

2025-04-17T08:10:14+02:00 :: requested data : ticket_id => 18 , query_message => This is only for testing the review form  , attachment => ../../uploads/ticket_attachment/WhatsApp Image 2025-01-27 at 5.41.07 PM (1) (1).jpeg 

2025-04-17T08:10:14+02:00 :: checkTicketReopenStatus_query => SELECT IF(reopenStatus = '1','open','close') as `status` , department , reopenQuery , reopenAttachment FROM ticket_record WHERE id = '18' 

2025-04-17T08:10:14+02:00 :: resposne => {"status":"close","department":"12","reopenQuery":null,"reopenAttachment":null}

2025-04-17T08:10:14+02:00 :: respose => {"status":400,"message":"Re-open request already send"}

 ============ End Of Script ================== 

2025-04-17T08:10:14+02:00 :: StoreAndupdateTicket Script Start 

2025-04-17T08:10:14+02:00 :: method inside the insertReopenTicketQuery 

2025-04-17T08:10:14+02:00 :: requested data : ticket_id => 18 , query_message => This is only for testing the review form  , attachment => ../../uploads/ticket_attachment/WhatsApp Image 2025-01-27 at 5.41.07 PM (1) (1).jpeg 

2025-04-17T08:10:14+02:00 :: checkTicketReopenStatus_query => SELECT IF(reopenStatus = '1','open','close') as `status` , department , reopenQuery , reopenAttachment FROM ticket_record WHERE id = '18' 

2025-04-17T08:10:14+02:00 :: resposne => {"status":"close","department":"12","reopenQuery":null,"reopenAttachment":null}

2025-04-17T08:10:14+02:00 :: respose => {"status":400,"message":"Re-open request already send"}

 ============ End Of Script ================== 

2025-04-17T08:16:36+02:00 :: StoreAndupdateTicket Script Start 

2025-04-17T08:16:36+02:00 :: method inside the insertReopenTicketQuery 

2025-04-17T08:16:36+02:00 :: requested data : ticket_id => 18 , query_message => This message for testing the Review From  , attachment => ../../uploads/ticket_attachment/WhatsApp Image 2025-01-27 at 5.41.07 PM (1) (1).jpeg 

2025-04-17T08:16:36+02:00 :: checkTicketReopenStatus_query => SELECT IF(reopenStatus = '1','open','close') as `status` , department , reopenQuery , reopenAttachment FROM ticket_record WHERE id = '18' 

2025-04-17T08:16:36+02:00 :: resposne => {"status":"close","department":"12","reopenQuery":null,"reopenAttachment":null}

2025-04-17T08:16:36+02:00 :: updateReopenStatus_query =>  UPDATE ticket_record SET reopenStatus = '1' , reopenQuery = 'This message for testing the Review From ' , reopenAttachment = '../../uploads/ticket_attachment/WhatsApp Image 2025-01-27 at 5.41.07 PM (1) (1).jpeg' WHERE id = '18' 

2025-04-17T08:16:36+02:00 :: method inside the getTopMostUserDetails 

2025-04-17T08:16:36+02:00 :: requested data => 12 

2025-04-17T08:16:36+02:00 :: Department details Query => SELECT * FROM `Department` WHERE id = '12' 

2025-04-17T08:16:36+02:00 :: DepartmentUpperHierarchy user Query => SELECT Email FROM `users` WHERE Department_id = '12' AND Deleted_At IS NULL AND Hierarchy_value = (SELECT MIN(Hierarchy_value) FROM `users` WHERE Department_id = '12' AND Deleted_At IS NULL) 

2025-04-17T08:16:36+02:00 :: verticalUpperHierarchyUser Query => SELECT GROUP_CONCAT(CASE WHEN Vertical_id IN (4) AND Department_id IS NULL THEN Email END) AS vertical_users FROM `users` WHERE Deleted_At IS NULL 

2025-04-17T08:16:36+02:00 :: method inside the getTicketAllInformation 

2025-04-17T08:16:36+02:00 :: requested data : ticket_id => 18 

2025-04-17T08:16:36+02:00 :: fetch ticket info Query => SELECT ticket_record.id , ticket_record.unique_id , ticket_record.task_name , ticket_record.task_description , CASE WHEN ticket_record.priority = '1' THEN 'Low' WHEN ticket_record.priority = '2' THEN 'Medium' WHEN ticket_record.priority = '3' THEN 'High' END as `ticketPriority` , DATE_FORMAT(ticket_record.updated_at,'%d-%b-%Y %h:%i:%s') as `assignDate` , ticket_record.create_person_name as `createdPersonName` , assign_to_user.Name as `assignToUser` , assign_by_user.Name as `assignByUser` , ticket_record.create_person_email as `createPersonEmail` , assign_to_user.Email as `assignToUserEmail` FROM ticket_record LEFT JOIN users as `assign_to_user` ON ticket_record.assign_to = assign_to_user.ID LEFT JOIN users AS `assign_by_user` ON ticket_record.assign_by = assign_by_user.ID  WHERE ticket_record.id = '18' 

2025-04-17T08:16:36+02:00 :: method inside the createEmailData 

2025-04-17T08:16:36+02:00 :: requested ticket_info_data => {"ticket_id":"18","ticketQniqueId":"GLOCAL-4","ticketSubject":"Exam Form Not Show","ticketPriority":"High","assignDate":"17-Apr-2025 11:46:36","createdPersonName":"GUNISHA SHARMA ","assignToUser":"Deepak Singh Rawat","assignByUser":"Mahinder Nautiyal","createPersonEmail":"sharmagunisha2@gmail.com","assignToUserEmail":"deepak@edtechinnovate.com","clientQueryMessage":"This message for testing the Review From "} email_function => {"messageToDepartHeadForNewTicketCreate":{"email":{"to":"mahinder@edtechinnovate.com","cc":""}}} 

2025-04-17T08:16:36+02:00 :: Resposne received from => messageToDepartHeadForNewTicketCreate 

2025-04-17T08:16:36+02:00 :: TO => mahinder@edtechinnovate.com 

 cc =>  

 subject => Action Required: New Ticket Created - GLOCAL-4 

 body => 
        <p>Dear Manager,</p>
        <p>This is to inform you that a new ticket (Reference ID: <b>GLOCAL-4</b>) has been created by <b></b> regarding Exam Form Not Show.</p>
        <p>Ticket Details:</p>
        <div><b>- Ticket ID: </b>GLOCAL-4</div>
        <div><b>- Subject: </b>Exam Form Not Show</div>
        <div><b>- Created On: </b></div>
        <p>Kindly review and assign this ticket to the appropriate team member for further handling.</p>
        <div>Best Regards</div>
        <div>EDTECH Innovate Pvt. Ltd.</div>
         

2025-04-17T08:16:36+02:00 :: mail_queue Data => [{"to":"mahinder@edtechinnovate.com","cc":"","subject":"Action Required: New Ticket Created - GLOCAL-4","body":"\r\n        <p>Dear Manager,<\/p>\r\n        <p>This is to inform you that a new ticket (Reference ID: <b>GLOCAL-4<\/b>) has been created by <b><\/b> regarding Exam Form Not Show.<\/p>\r\n        <p>Ticket Details:<\/p>\r\n        <div><b>- Ticket ID: <\/b>GLOCAL-4<\/div>\r\n        <div><b>- Subject: <\/b>Exam Form Not Show<\/div>\r\n        <div><b>- Created On: <\/b><\/div>\r\n        <p>Kindly review and assign this ticket to the appropriate team member for further handling.<\/p>\r\n        <div>Best Regards<\/div>\r\n        <div>EDTECH Innovate Pvt. Ltd.<\/div>\r\n        "}]

2025-04-17T08:16:36+02:00 :: url => http://edtechstrucure.local/app/mailSystem/CreateMailQueue , request => {"data":[{"to":"mahinder@edtechinnovate.com","cc":"","subject":"Action Required: New Ticket Created - GLOCAL-4","body":"\r\n        <p>Dear Manager,<\/p>\r\n        <p>This is to inform you that a new ticket (Reference ID: <b>GLOCAL-4<\/b>) has been created by <b><\/b> regarding Exam Form Not Show.<\/p>\r\n        <p>Ticket Details:<\/p>\r\n        <div><b>- Ticket ID: <\/b>GLOCAL-4<\/div>\r\n        <div><b>- Subject: <\/b>Exam Form Not Show<\/div>\r\n        <div><b>- Created On: <\/b><\/div>\r\n        <p>Kindly review and assign this ticket to the appropriate team member for further handling.<\/p>\r\n        <div>Best Regards<\/div>\r\n        <div>EDTECH Innovate Pvt. Ltd.<\/div>\r\n        "}]} 

2025-04-17T08:16:36+02:00 :: response => {"status":200,"message":"Worker Start successfully!"} 

2025-04-17T08:16:36+02:00 :: respose => {"status":200,"message":"Re-open Request Send successfully!"}

 ============ End Of Script ================== 

2025-04-17T08:20:47+02:00 :: StoreAndupdateTicket Script Start 

2025-04-17T08:20:47+02:00 :: method inside the insertReopenTicketQuery 

2025-04-17T08:20:47+02:00 :: requested data : ticket_id => 18 , query_message => This message for testing the Review From  , attachment => ../../uploads/ticket_attachment/WhatsApp Image 2025-01-27 at 5.41.07 PM (1) (1).jpeg 

2025-04-17T08:20:47+02:00 :: checkTicketReopenStatus_query => SELECT IF(reopenStatus = '1','open','close') as `status` , department , reopenQuery , reopenAttachment FROM ticket_record WHERE id = '18' 

2025-04-17T08:20:47+02:00 :: resposne => {"status":"open","department":"12","reopenQuery":"This message for testing the Review From ","reopenAttachment":"..\/..\/uploads\/ticket_attachment\/WhatsApp Image 2025-01-27 at 5.41.07 PM (1) (1).jpeg"}

2025-04-17T08:20:47+02:00 :: respose => {"status":400,"message":"Re-open request already send"}

 ============ End Of Script ================== 

2025-04-17T09:17:14+02:00 :: StoreAndupdateTicket Script Start 

2025-04-17T09:17:14+02:00 :: method inside the insertReopenTicketQuery 

2025-04-17T09:17:14+02:00 :: requested data : ticket_id => 18 , query_message => This is review from for re-open query , attachment =>  

2025-04-17T09:17:14+02:00 :: checkTicketReopenStatus_query => SELECT IF(reopenStatus = '1','open','close') as `status` , department , reopenQuery , reopenAttachment FROM ticket_record WHERE id = '18' 

2025-04-17T09:17:14+02:00 :: resposne => {"status":"open","department":"12","reopenQuery":"[\"This is review from for re-open query\"]","reopenAttachment":"[null]"}

2025-04-17T09:17:14+02:00 :: respose => {"status":400,"message":"Re-open request already send"}

 ============ End Of Script ================== 

2025-04-17T09:33:51+02:00 :: StoreAndupdateTicket Script Start 

2025-04-17T09:33:51+02:00 :: method inside the InsertTicket 

2025-04-17T09:33:51+02:00 :: requested data => {"task_name":"INE Tech ","status":"1","category":"1","priority":"1","department":"12","task_description":"This is new website develop from scratch ","attachment":null}

2025-04-17T09:33:51+02:00 insert query => INSERT INTO `ticket_record`(`unique_id`, `task_name`, `task_description`,`requestfrom`, `raised_by`, `status`, `priority`, `category`, `department`, `create_person_name`, `create_person_number`, `create_person_email`, `attachment`) VALUES ('EDTECH-15','INE Tech ','This is new website develop from scratch ','edtech','1','1','1','1','12','Super Admin','','superadmin@edtechinnovate.com','') 

2025-04-17T09:33:51+02:00 insert history query => INSERT INTO `ticket_history`(`ticket_id`, `updated_by`,`status`,`priority`, `category`, `department`) VALUES ('22','1','1','1','1','12') 

2025-04-17T09:33:51+02:00 :: method inside the getTopMostUserDetails 

2025-04-17T09:33:51+02:00 :: requested data => 12 

2025-04-17T09:33:51+02:00 :: Department details Query => SELECT * FROM `Department` WHERE id = '12' 

2025-04-17T09:33:51+02:00 :: DepartmentUpperHierarchy user Query => SELECT Email FROM `users` WHERE Department_id = '12' AND Deleted_At IS NULL AND Hierarchy_value = (SELECT MIN(Hierarchy_value) FROM `users` WHERE Department_id = '12' AND Deleted_At IS NULL) 

2025-04-17T09:33:51+02:00 :: verticalUpperHierarchyUser Query => SELECT GROUP_CONCAT(CASE WHEN Vertical_id IN (4) AND Department_id IS NULL THEN Email END) AS vertical_users FROM `users` WHERE Deleted_At IS NULL 

2025-04-17T09:33:51+02:00 :: method inside the createEmailData 

2025-04-17T09:33:51+02:00 :: requested ticket_info_data => {"ticketQniqueId":"EDTECH-15","ticketSubject":"INE Tech ","ticketPriority":"1","raisedByPersonName":"Super Admin","createdTime":"17-Apr-2025 09:33:51"} email_function => {"successfulTicketGenerationMessageForTicketRaisedPerson":{"email":"superadmin@edtechinnovate.com"},"messageToDepartHeadForNewTicketCreate":{"email":{"to":"mahinder@edtechinnovate.com","cc":""}}} 

2025-04-17T09:33:51+02:00 :: Resposne received from => successfulTicketGenerationMessageForTicketRaisedPerson 

2025-04-17T09:33:51+02:00 :: TO => superadmin@edtechinnovate.com 

 cc =>  

 subject => Ticket Created Successfully Reference - EDTECH-15 

 body => <p>Dear Super Admin,</p>
            <p>Thank you for reaching out to our support team.</p>
            <div>We have received your ticket (Reference ID: EDTECH-15) regarding <b>INE Tech </b>.</div>
            <div>Our team is currently reviewing your request and will get back to you as soon as possible.</div>
            <br>
            <div>Best Regards</div>
            <div>EDTECH Innovate Pvt. Ltd.</div>
         

2025-04-17T09:33:51+02:00 :: Resposne received from => messageToDepartHeadForNewTicketCreate 

2025-04-17T09:33:51+02:00 :: TO => mahinder@edtechinnovate.com 

 cc =>  

 subject => Action Required: New Ticket Created - EDTECH-15 

 body => 
        <p>Dear Manager,</p>
        <p>This is to inform you that a new ticket (Reference ID: <b>EDTECH-15</b>) has been created by <b>Super Admin</b> regarding INE Tech .</p>
        <p>Ticket Details:</p>
        <div><b>- Ticket ID: </b>EDTECH-15</div>
        <div><b>- Subject: </b>INE Tech </div>
        <div><b>- Created On: </b>17-Apr-2025 09:33:51</div>
        <p>Kindly review and assign this ticket to the appropriate team member for further handling.</p>
        <div>Best Regards</div>
        <div>EDTECH Innovate Pvt. Ltd.</div>
         

2025-04-17T09:33:51+02:00 :: mail_queue Data => [{"to":"superadmin@edtechinnovate.com","cc":null,"subject":"Ticket Created Successfully Reference - EDTECH-15","body":"<p>Dear Super Admin,<\/p>\r\n            <p>Thank you for reaching out to our support team.<\/p>\r\n            <div>We have received your ticket (Reference ID: EDTECH-15) regarding <b>INE Tech <\/b>.<\/div>\r\n            <div>Our team is currently reviewing your request and will get back to you as soon as possible.<\/div>\r\n            <br>\r\n            <div>Best Regards<\/div>\r\n            <div>EDTECH Innovate Pvt. Ltd.<\/div>\r\n        "},{"to":"mahinder@edtechinnovate.com","cc":"","subject":"Action Required: New Ticket Created - EDTECH-15","body":"\r\n        <p>Dear Manager,<\/p>\r\n        <p>This is to inform you that a new ticket (Reference ID: <b>EDTECH-15<\/b>) has been created by <b>Super Admin<\/b> regarding INE Tech .<\/p>\r\n        <p>Ticket Details:<\/p>\r\n        <div><b>- Ticket ID: <\/b>EDTECH-15<\/div>\r\n        <div><b>- Subject: <\/b>INE Tech <\/div>\r\n        <div><b>- Created On: <\/b>17-Apr-2025 09:33:51<\/div>\r\n        <p>Kindly review and assign this ticket to the appropriate team member for further handling.<\/p>\r\n        <div>Best Regards<\/div>\r\n        <div>EDTECH Innovate Pvt. Ltd.<\/div>\r\n        "}]

2025-04-17T09:33:51+02:00 :: url => http://edtechstrucure.local/app/mailSystem/CreateMailQueue , request => {"data":[{"to":"superadmin@edtechinnovate.com","cc":null,"subject":"Ticket Created Successfully Reference - EDTECH-15","body":"<p>Dear Super Admin,<\/p>\r\n            <p>Thank you for reaching out to our support team.<\/p>\r\n            <div>We have received your ticket (Reference ID: EDTECH-15) regarding <b>INE Tech <\/b>.<\/div>\r\n            <div>Our team is currently reviewing your request and will get back to you as soon as possible.<\/div>\r\n            <br>\r\n            <div>Best Regards<\/div>\r\n            <div>EDTECH Innovate Pvt. Ltd.<\/div>\r\n        "},{"to":"mahinder@edtechinnovate.com","cc":"","subject":"Action Required: New Ticket Created - EDTECH-15","body":"\r\n        <p>Dear Manager,<\/p>\r\n        <p>This is to inform you that a new ticket (Reference ID: <b>EDTECH-15<\/b>) has been created by <b>Super Admin<\/b> regarding INE Tech .<\/p>\r\n        <p>Ticket Details:<\/p>\r\n        <div><b>- Ticket ID: <\/b>EDTECH-15<\/div>\r\n        <div><b>- Subject: <\/b>INE Tech <\/div>\r\n        <div><b>- Created On: <\/b>17-Apr-2025 09:33:51<\/div>\r\n        <p>Kindly review and assign this ticket to the appropriate team member for further handling.<\/p>\r\n        <div>Best Regards<\/div>\r\n        <div>EDTECH Innovate Pvt. Ltd.<\/div>\r\n        "}]} 

2025-04-17T09:33:52+02:00 :: response => {"status":200,"message":"Worker Start successfully!"} 

2025-04-17T09:33:52+02:00 :: respose => {"status":200,"message":"Ticket create successfully!"}

 ============ End Of Script ================== 

2025-04-17T09:33:52+02:00 :: StoreAndupdateTicket Script Start 

2025-04-17T09:33:52+02:00 :: method inside the insertNotification 

2025-04-17T09:33:52+02:00 :: requested data : assign_to => 22 

2025-04-17T09:33:52+02:00 :: respose => {"status":200,"message":"Notification added successfully!"}

 ============ End Of Script ================== 

2025-04-17T09:47:37+02:00 :: StoreAndupdateTicket Script Start 

2025-04-17T09:47:37+02:00 :: method inside the insertReopenTicketQuery 

2025-04-17T09:47:37+02:00 :: requested data : ticket_id => 18 , query_message => ftffhhvg ggfgvgvgvcvg , attachment => ../../uploads/ticket_attachment/WhatsApp Image 2025-01-27 at 5.41.07 PM (1) (1).jpeg 

2025-04-17T09:47:37+02:00 :: checkTicketReopenStatus_query => SELECT IF(reopenStatus = '1','open','close') as `status` , department , reopenQuery , reopenAttachment FROM ticket_record WHERE id = '18' 

2025-04-17T09:47:37+02:00 :: resposne => {"status":"close","department":"12","reopenQuery":null,"reopenAttachment":null}

2025-04-17T09:47:37+02:00 :: updateReopenStatus_query =>  UPDATE ticket_record SET reopenStatus = '1' , reopenQuery = '["ftffhhvg ggfgvgvgvcvg"]' , reopenAttachment = '["..\/..\/uploads\/ticket_attachment\/WhatsApp Image 2025-01-27 at 5.41.07 PM (1) (1).jpeg"]' WHERE id = '18' 

2025-04-17T09:47:37+02:00 :: method inside the getTopMostUserDetails 

2025-04-17T09:47:37+02:00 :: requested data => 12 

2025-04-17T09:47:37+02:00 :: Department details Query => SELECT * FROM `Department` WHERE id = '12' 

2025-04-17T09:47:37+02:00 :: DepartmentUpperHierarchy user Query => SELECT Email FROM `users` WHERE Department_id = '12' AND Deleted_At IS NULL AND Hierarchy_value = (SELECT MIN(Hierarchy_value) FROM `users` WHERE Department_id = '12' AND Deleted_At IS NULL) 

2025-04-17T09:47:37+02:00 :: verticalUpperHierarchyUser Query => SELECT GROUP_CONCAT(CASE WHEN Vertical_id IN (4) AND Department_id IS NULL THEN Email END) AS vertical_users FROM `users` WHERE Deleted_At IS NULL 

2025-04-17T09:47:37+02:00 :: method inside the getTicketAllInformation 

2025-04-17T09:47:37+02:00 :: requested data : ticket_id => 18 

2025-04-17T09:47:37+02:00 :: fetch ticket info Query => SELECT ticket_record.id , ticket_record.unique_id , ticket_record.task_name , ticket_record.task_description , CASE WHEN ticket_record.priority = '1' THEN 'Low' WHEN ticket_record.priority = '2' THEN 'Medium' WHEN ticket_record.priority = '3' THEN 'High' END as `ticketPriority` , DATE_FORMAT(ticket_record.updated_at,'%d-%b-%Y %h:%i:%s') as `assignDate` , ticket_record.create_person_name as `createdPersonName` , assign_to_user.Name as `assignToUser` , assign_by_user.Name as `assignByUser` , ticket_record.create_person_email as `createPersonEmail` , assign_to_user.Email as `assignToUserEmail` FROM ticket_record LEFT JOIN users as `assign_to_user` ON ticket_record.assign_to = assign_to_user.ID LEFT JOIN users AS `assign_by_user` ON ticket_record.assign_by = assign_by_user.ID  WHERE ticket_record.id = '18' 

2025-04-17T09:47:37+02:00 :: method inside the createEmailData 

2025-04-17T09:47:37+02:00 :: requested ticket_info_data => {"ticket_id":"18","ticketQniqueId":"GLOCAL-4","ticketSubject":"Exam Form Not Show","ticketPriority":"High","assignDate":"17-Apr-2025 01:17:37","createdPersonName":"GUNISHA SHARMA ","assignToUser":"Deepak Singh Rawat","assignByUser":"Mahinder Nautiyal","createPersonEmail":"sharmagunisha2@gmail.com","assignToUserEmail":"deepak@edtechinnovate.com","clientQueryMessage":"ftffhhvg ggfgvgvgvcvg"} email_function => {"messageToDepartmentHeadAboutTicketReopen":{"email":{"to":"mahinder@edtechinnovate.com","cc":""}}} 

2025-04-17T09:47:37+02:00 :: Resposne received from => messageToDepartmentHeadAboutTicketReopen 

2025-04-17T09:47:37+02:00 :: TO => mahinder@edtechinnovate.com 

 cc =>  

 subject => Ticket GLOCAL-4 Reopened by Client 

 body => 
        <p>Dear Manager,</p>
        <div>The client has reopened ticket <strong>GLOCAL-4</strong> .</div>
        <h4>Client's Query/Message:</h4>
        <p>ftffhhvg ggfgvgvgvcvg</p>
        <p>Please review the ticket and proceed accordingly.</p>
        <div>Best Regards</div>
        <div>EDTECH Innovate Pvt. Ltd.</div>
         

2025-04-17T09:47:37+02:00 :: mail_queue Data => [{"to":"mahinder@edtechinnovate.com","cc":"","subject":"Ticket GLOCAL-4 Reopened by Client","body":"\r\n        <p>Dear Manager,<\/p>\r\n        <div>The client has reopened ticket <strong>GLOCAL-4<\/strong> .<\/div>\r\n        <h4>Client's Query\/Message:<\/h4>\r\n        <p>ftffhhvg ggfgvgvgvcvg<\/p>\r\n        <p>Please review the ticket and proceed accordingly.<\/p>\r\n        <div>Best Regards<\/div>\r\n        <div>EDTECH Innovate Pvt. Ltd.<\/div>\r\n        "}]

2025-04-17T09:47:37+02:00 :: url => http://edtechstrucure.local/app/mailSystem/CreateMailQueue , request => {"data":[{"to":"mahinder@edtechinnovate.com","cc":"","subject":"Ticket GLOCAL-4 Reopened by Client","body":"\r\n        <p>Dear Manager,<\/p>\r\n        <div>The client has reopened ticket <strong>GLOCAL-4<\/strong> .<\/div>\r\n        <h4>Client's Query\/Message:<\/h4>\r\n        <p>ftffhhvg ggfgvgvgvcvg<\/p>\r\n        <p>Please review the ticket and proceed accordingly.<\/p>\r\n        <div>Best Regards<\/div>\r\n        <div>EDTECH Innovate Pvt. Ltd.<\/div>\r\n        "}]} 

2025-04-17T09:47:37+02:00 :: response => {"status":200,"message":"Worker Start successfully!"} 

2025-04-17T09:47:37+02:00 :: respose => {"status":200,"message":"Re-open Request Send successfully!"}

 ============ End Of Script ================== 

